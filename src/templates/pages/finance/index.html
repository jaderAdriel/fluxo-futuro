{% extends "base.html" %}

{% block breadcrumb %}
  {% include "components/breadcrumb.html" with parent="Dashboard" parent_url="/dashboard/" current="Transações" %}
{% endblock %}

{% block content %}
<div class="row">
  <div class="col-12 mt-4">
    <div class="card min-vh-70">
      {% include "components/card_header.html" with title="Finanças" %}

      <div class="card-body">
        <div class="d-flex justify-content-between align-items-center px-3 mb-3">
          <h6 class="mb-0">Transações</h6>
          <a href="{% url 'create-finance' %}" class="btn btn-primary btn-sm">
            Nova transação
          </a>
        </div>

        <div class="table-responsive p-0">
          <table class="table align-items-center mb-0">
            <thead>
              <tr>
                <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Descrição</th>
                <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 text-center">Valor</th>
                <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 text-center">Data</th>
                <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 text-center">Tipo</th>
                <th class="text-secondary opacity-7 text-center">Ações</th>
              </tr>
            </thead>
            <tbody>
              {% for t in transactions %}
                <tr>
                  <td class="px-3">
                    <span class="text-sm">{{ t.description }}</span>
                  </td>
                  <td class="text-center">
                    <span class="text-sm">R$ {{ t.amount }}</span>
                  </td>
                  <td class="text-center">
                    <span class="text-sm">{{ t.date|date:"d/m/Y" }}</span>
                  </td>
                  <td class="text-center">
                      {% if t.type == 'IN' %}
                        <span class="badge bg-success border border-success text-white">
                          {{ t.get_type_display }}
                        </span>
                      {% else %}
                        <span class="badge bg-danger border border-danger text-white">
                          {{ t.get_type_display }}
                        </span>
                      {% endif %}
                  </td>

                  <td class="text-center align-center px-3">
                    <a href="{% url 'edit-finance' t.id %}" class="btn btn-outline-secondary btn-sm mx-1">
                      Editar
                    </a>
                    <a href="{% url 'delete-finance' t.id %}" class="btn btn-outline-danger btn-sm mx-1">
                      Excluir
                    </a>
                  </td>
                </tr>
              {% empty %}
                <tr>
                  <td colspan="5" class="text-center py-4 text-sm text-secondary">
                    Nenhuma transação cadastrada.
                  </td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>

      </div>
    </div>
  </div>
</div>
{% endblock %}
